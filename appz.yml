app:
    name: mariadb Master
    code: mariadbmaster
    notify: appzdev@cloudbourne.co

build:
    version: 10.4
    env: DEV
    build_file: none
    output_files: output/*.zip
    image_template: mariadb_master-10.4
    image_name: alpha/mariadb_master

deploy:
    context: alpha/DEV
    type: statefulset
    replicas: 1
    port:
    - 3306

volumes:
  - claim: mariadb-master-data
    mount: /appz/data
    name: data
    size: 10Gi
    class: microk8s-hostpath
    mode: ReadWriteOnce
    
monitor:
    notify: appzops@cloudbourne.co

properties:
    MYSQL_USER: springuser
    MYSQL_DATABASE: springdb
    MYSQL_CONNECTIONDB: mysql
    MYSQL_CONNECTUSER: root
    MYSQL_REPLICATION_USER: replication
    MYSQL_REPLICATION_PASSWORD:
      vault: MYSQL_REPLICATION_PASSWORD
    MYSQL_PASSWORD:
      vault: MYSQL_PASSWORD_KEY
    MYSQL_SPRINGUSER_PASSWORD:
      vault: MYSQL_SPRINGUSER_PASSWORD
    MYSQL_SPRINGUSER1_PASSWORD:
      vault: MYSQL_SPRINGUSER1_PASSWORD
    MYSQL_SPRINGUSER2_PASSWORD:
      vault: MYSQL_SPRINGUSER2_PASSWORD
    MYSQL_SPRINGUSER3_PASSWORD:
      vault: MYSQL_SPRINGUSER3_PASSWORD
    MYSQL_SPRINGUSER4_PASSWORD:
      vault: MYSQL_SPRINGUSER4_PASSWORD
    MYSQL_ROOT_PASSWORD:
      vault: MYSQL_ROOT_PASSWORD_KEY
    revision : 25
